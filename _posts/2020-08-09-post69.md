---
layout: post
title:  "[BOJ 4013]"
date:   2020-08-08
excerpt: "ATM"
categories: PS
image: "/images/4013.png"
sitemap :
  changefreq : weekly
  priority : 1.0
---
문제 바로가기 : [https://www.acmicpc.net/problem/4013](https://www.acmicpc.net/problem/4013)<br>
문제 설명은 위 링크에서 확인해주시길 바랍니다.
<br>
## Solution
<div class="colorscripter-code" style="color:#F1F2F3;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#22282A;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #4f4f4f"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#aaa;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div><div style="line-height:130%">42</div><div style="line-height:130%">43</div><div style="line-height:130%">44</div><div style="line-height:130%">45</div><div style="line-height:130%">46</div><div style="line-height:130%">47</div><div style="line-height:130%">48</div><div style="line-height:130%">49</div><div style="line-height:130%">50</div><div style="line-height:130%">51</div><div style="line-height:130%">52</div><div style="line-height:130%">53</div><div style="line-height:130%">54</div><div style="line-height:130%">55</div><div style="line-height:130%">56</div><div style="line-height:130%">57</div><div style="line-height:130%">58</div><div style="line-height:130%">59</div><div style="line-height:130%">60</div><div style="line-height:130%">61</div><div style="line-height:130%">62</div><div style="line-height:130%">63</div><div style="line-height:130%">64</div><div style="line-height:130%">65</div><div style="line-height:130%">66</div><div style="line-height:130%">67</div><div style="line-height:130%">68</div><div style="line-height:130%">69</div><div style="line-height:130%">70</div><div style="line-height:130%">71</div><div style="line-height:130%">72</div><div style="line-height:130%">73</div><div style="line-height:130%">74</div><div style="line-height:130%">75</div><div style="line-height:130%">76</div><div style="line-height:130%">77</div><div style="line-height:130%">78</div><div style="line-height:130%">79</div><div style="line-height:130%">80</div><div style="line-height:130%">81</div><div style="line-height:130%">82</div><div style="line-height:130%">83</div><div style="line-height:130%">84</div><div style="line-height:130%">85</div><div style="line-height:130%">86</div><div style="line-height:130%">87</div><div style="line-height:130%">88</div><div style="line-height:130%">89</div><div style="line-height:130%">90</div><div style="line-height:130%">91</div><div style="line-height:130%">92</div><div style="line-height:130%">93</div><div style="line-height:130%">94</div><div style="line-height:130%">95</div><div style="line-height:130%">96</div><div style="line-height:130%">97</div><div style="line-height:130%">98</div><div style="line-height:130%">99</div><div style="line-height:130%">100</div><div style="line-height:130%">101</div><div style="line-height:130%">102</div><div style="line-height:130%">103</div><div style="line-height:130%">104</div><div style="line-height:130%">105</div><div style="line-height:130%">106</div><div style="line-height:130%">107</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#F1F2F3;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#919191">//4013</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>iostream<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>string<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>cstring<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>cstdio<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>vector<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>stack<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">using&nbsp;namespace&nbsp;std;</div><div style="padding:0 6px; white-space:pre; line-height:130%">#define&nbsp;INF&nbsp;<span style="color:#FFCD22">987654321</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#define&nbsp;MAXSIZE&nbsp;<span style="color:#FFCD22">500001</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">typedef&nbsp;long&nbsp;long&nbsp;ll;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">vector<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>int<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;node[MAXSIZE],&nbsp;setEdge[MAXSIZE];</div><div style="padding:0 6px; white-space:pre; line-height:130%">vector<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>vector<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>int<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;SCC;</div><div style="padding:0 6px; white-space:pre; line-height:130%">int&nbsp;chk[MAXSIZE],&nbsp;degree[MAXSIZE];</div><div style="padding:0 6px; white-space:pre; line-height:130%">int&nbsp;money[MAXSIZE],&nbsp;uni[MAXSIZE];</div><div style="padding:0 6px; white-space:pre; line-height:130%">int&nbsp;SCCcost[MAXSIZE],&nbsp;SCCSavecost[MAXSIZE];</div><div style="padding:0 6px; white-space:pre; line-height:130%">int&nbsp;noderest[MAXSIZE],&nbsp;SCCrest[MAXSIZE];</div><div style="padding:0 6px; white-space:pre; line-height:130%">bool&nbsp;fin[MAXSIZE];</div><div style="padding:0 6px; white-space:pre; line-height:130%">stack<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>int<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;s;</div><div style="padding:0 6px; white-space:pre; line-height:130%">int&nbsp;id,&nbsp;sccnum;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">int&nbsp;dfs(int&nbsp;cur)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;chk[cur]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span><span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>id;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;s.push(cur);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;parent&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;chk[cur];</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(auto<span style="color:#F1F2F3"></span><span style="color:#93C763">&amp;</span>&nbsp;next&nbsp;:&nbsp;node[cur])&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(chk[next]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">0</span>)&nbsp;parent&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;min(parent,&nbsp;dfs(next));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(<span style="color:#F1F2F3"></span><span style="color:#93C763">!</span>fin[next])&nbsp;parent&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;min(parent,&nbsp;chk[next]);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#919191">//부모일&nbsp;때&nbsp;하나의&nbsp;SCC&nbsp;생성</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(chk[cur]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;parent)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vector<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>int<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;subSCC;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sccnum<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span><span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(<span style="color:#FFCD22">1</span>)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;node&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;s.top();&nbsp;s.pop();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subSCC.push_back(node);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin[node]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">true</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uni[node]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;sccnum;&nbsp;<span style="color:#919191">//어느&nbsp;집합에&nbsp;있는지&nbsp;체크</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SCCcost[sccnum]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;money[node];&nbsp;<span style="color:#919191">//각&nbsp;SCC&nbsp;현금&nbsp;합</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(noderest[node])&nbsp;SCCrest[sccnum]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">true</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(chk[node]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;parent)&nbsp;break;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SCC.push_back(subSCC);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;parent;</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">int&nbsp;ans(int&nbsp;cur)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;tmp&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;int<span style="color:#F1F2F3"></span><span style="color:#93C763">&amp;</span>&nbsp;ret&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;SCCSavecost[cur];</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(ret&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">!</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">-</span><span style="color:#FFCD22">1</span>)&nbsp;return&nbsp;ret;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(auto<span style="color:#F1F2F3"></span><span style="color:#93C763">&amp;</span>&nbsp;next&nbsp;:&nbsp;setEdge[cur])&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;max(tmp,&nbsp;ans(next));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tmp&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">0</span>)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(<span style="color:#F1F2F3"></span><span style="color:#93C763">!</span>SCCrest[cur])&nbsp;return&nbsp;ret&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;ret&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;SCCcost[cur];</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;ret&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;tmp&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>&nbsp;SCCcost[cur];</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">int&nbsp;main()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;cin.tie(nullptr);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;cout.tie(NULL);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;ios_base::sync_with_stdio(<span style="color:#FFCD22">false</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#919191">//input</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;V,&nbsp;E;&nbsp;cin&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;V&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;E;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(E<span style="color:#F1F2F3"></span><span style="color:#93C763">-</span><span style="color:#F1F2F3"></span><span style="color:#93C763">-</span>)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;a,&nbsp;b;&nbsp;cin&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;a&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;b;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node[a].push_back(b);&nbsp;<span style="color:#919191">//a-&gt;b</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">1</span>;&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;V;&nbsp;i<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span><span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>)&nbsp;cin&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;money[i];&nbsp;<span style="color:#919191">//각&nbsp;노드에&nbsp;있는&nbsp;돈</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;s,&nbsp;r;&nbsp;cin&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;s&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;r;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">0</span>;&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>&nbsp;r;&nbsp;i<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span><span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;isrest;&nbsp;cin&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;isrest;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noderest[isrest]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">true</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#919191">//SCC</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">1</span>;&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;V;&nbsp;i<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span><span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>)&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(chk[i]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">0</span>)&nbsp;dfs(i);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#919191">//노드별&nbsp;방향에서&nbsp;집합별&nbsp;방향으로&nbsp;변환</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">1</span>;&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;V;&nbsp;i<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span><span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(auto<span style="color:#F1F2F3"></span><span style="color:#93C763">&amp;</span>&nbsp;next&nbsp;:&nbsp;node[i])&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(uni[i]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;uni[next])&nbsp;continue;&nbsp;<span style="color:#919191">//same&nbsp;union</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setEdge[uni[i]].push_back(uni[next]);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;fill(SCCSavecost,&nbsp;SCCSavecost&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>&nbsp;sccnum&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>&nbsp;<span style="color:#FFCD22">1</span>,&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">-</span><span style="color:#FFCD22">1</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#919191">//answer</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>&nbsp;ans(uni[s]);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<span style="color:#FFCD22">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4ftext-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#4f4f4f;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>
<br/>

### review
교차로마다 ATM은 무조건 있으며 레스토랑은 있을 수도 없을 수도 있다. 교차로마다 있는 길은 일방통행이다.<br>
일방통행이므로 주어진 그래프는 유향 그래프이며 거치는 곳마다 현금을 챙겨가 아무 레스토랑에 도착하면 된다.<br>
이 때 챙겨갈 수 있는 현금의 최댓값을 구하면 된다.<br>
<br>
주어진 그래프는 유향 그래프이고 사이클이 발생할 수 있다. 사이클에 속한 모든 교차로의 현금을 합쳐야한다.<br>
사이클 안에만 레스토랑이 있다면 모든 교차로의 현금을 모아서 가야하기 때문이다.<br>
물론 사이클 안 말고 밖에 레스토랑이 있다면 사이클 내부 현금을 다 합치고 움직여야 최댓값을 만들 수 있겠다.<br>
```
int dfs(int cur) {
  ...
  //부모일 때 하나의 SCC 생성
    if (chk[cur] == parent) {
        vector<int> subSCC;
        sccnum++;
        while (1) {
            int node = s.top(); s.pop();
            subSCC.push_back(node);
            fin[node] = true;
            uni[node] = sccnum; //어느 집합에 있는지 체크
            SCCcost[sccnum] += money[node]; //각 SCC 현금 합 **
            if (noderest[node]) SCCrest[sccnum] = true;
            if (chk[node] == parent) break;
        }
        SCC.push_back(subSCC);
    }

    return parent;
}
```
<br>
SCC들을 집합으로 묶어서 나타내면 DAG(Directed Acyclic Graph)가 된다. 그럼 그래프가 한결 간단해진다.<br>
근데 교차로별 간선 정보는 갖고 있지만(node[]) SCC별 간선 정보는 가지고 있지 않다. 필요한 정보를 추출해야 한다.<br>
노드의 집합 번호는 uni[node]로 나타내고 있기 때문에 이를 이용해서 집합이 서로 다를 때만 업데이트 해주면 된다.<br>
```
//노드별 방향에서 집합별 방향으로 변환
for (int i = 1; i <= V; i++) {
    for (auto& next : node[i]) {
        if (uni[i] == uni[next]) continue; //same union
        setEdge[uni[i]].push_back(uni[next]);
    }
}
```
주어진 시작점으로부터 레스토랑이 있는 곳으로 이동해가면서 각 SCC의 cost를 더해가면 된다.<br>
위상 정렬을 이용해서 더하든, DP를 이용해서 더하든 상관없음.<br>
```
int ans(int cur) {
    int tmp = 0;
    int& ret = SCCSavecost[cur];
    if (ret != -1) return ret;
    for (auto& next : setEdge[cur]) {
        tmp = max(tmp, ans(next));
    }
    if (tmp == 0) {
        if (!SCCrest[cur]) return ret = 0;
        return ret = SCCcost[cur];
    }
    else {
        return ret = tmp + SCCcost[cur];
    }
}
```
<br>
처음 제출한게 시간 초과에 걸리고 나서 뭐가 문젠지 생각해보고 건드리고 수정하다보니 반나절이나 걸렸다. ㅠㅠ<br>
나름 의미있는 수확이어서 억울하지는 않은데 그래도 순식간에 하루가 다 끝나가는건 좀..

<script src="https://utteranc.es/client.js"
        repo="yooniversal/blog-comments"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
