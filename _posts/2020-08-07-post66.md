---
layout: post
title:  "[BOJ 4196]"
date:   2020-08-07
excerpt: "도미노"
categories: PS
image: "/images/4196.png"
sitemap :
  changefreq : weekly
  priority : 1.0
---
문제 바로가기 : [https://www.acmicpc.net/problem/4196](https://www.acmicpc.net/problem/4196)<br>
비슷한 유형 문제, BOJ 3977 : [https://www.acmicpc.net/problem/3977](https://www.acmicpc.net/problem/3977)<br>
문제 설명은 위 링크에서 확인해주시길 바랍니다.
<br>
## Solution
<div class="colorscripter-code" style="color:#F1F2F3;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#22282A;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #4f4f4f"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#aaa;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div><div style="line-height:130%">42</div><div style="line-height:130%">43</div><div style="line-height:130%">44</div><div style="line-height:130%">45</div><div style="line-height:130%">46</div><div style="line-height:130%">47</div><div style="line-height:130%">48</div><div style="line-height:130%">49</div><div style="line-height:130%">50</div><div style="line-height:130%">51</div><div style="line-height:130%">52</div><div style="line-height:130%">53</div><div style="line-height:130%">54</div><div style="line-height:130%">55</div><div style="line-height:130%">56</div><div style="line-height:130%">57</div><div style="line-height:130%">58</div><div style="line-height:130%">59</div><div style="line-height:130%">60</div><div style="line-height:130%">61</div><div style="line-height:130%">62</div><div style="line-height:130%">63</div><div style="line-height:130%">64</div><div style="line-height:130%">65</div><div style="line-height:130%">66</div><div style="line-height:130%">67</div><div style="line-height:130%">68</div><div style="line-height:130%">69</div><div style="line-height:130%">70</div><div style="line-height:130%">71</div><div style="line-height:130%">72</div><div style="line-height:130%">73</div><div style="line-height:130%">74</div><div style="line-height:130%">75</div><div style="line-height:130%">76</div><div style="line-height:130%">77</div><div style="line-height:130%">78</div><div style="line-height:130%">79</div><div style="line-height:130%">80</div><div style="line-height:130%">81</div><div style="line-height:130%">82</div><div style="line-height:130%">83</div><div style="line-height:130%">84</div><div style="line-height:130%">85</div><div style="line-height:130%">86</div><div style="line-height:130%">87</div><div style="line-height:130%">88</div><div style="line-height:130%">89</div><div style="line-height:130%">90</div><div style="line-height:130%">91</div><div style="line-height:130%">92</div><div style="line-height:130%">93</div><div style="line-height:130%">94</div><div style="line-height:130%">95</div><div style="line-height:130%">96</div><div style="line-height:130%">97</div><div style="line-height:130%">98</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#F1F2F3;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#919191">//4196</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>iostream<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>string<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>cstring<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>cstdio<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>vector<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#include&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>stack<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">using&nbsp;namespace&nbsp;std;</div><div style="padding:0 6px; white-space:pre; line-height:130%">#define&nbsp;INF&nbsp;<span style="color:#FFCD22">987654321</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">#define&nbsp;MAXSIZE&nbsp;<span style="color:#FFCD22">100001</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">typedef&nbsp;long&nbsp;long&nbsp;ll;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">vector<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>int<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;node[MAXSIZE];</div><div style="padding:0 6px; white-space:pre; line-height:130%">vector<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>vector<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>int<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;SCC;</div><div style="padding:0 6px; white-space:pre; line-height:130%">int&nbsp;chk[MAXSIZE],&nbsp;degree[MAXSIZE],&nbsp;uni[MAXSIZE];</div><div style="padding:0 6px; white-space:pre; line-height:130%">bool&nbsp;fin[MAXSIZE];</div><div style="padding:0 6px; white-space:pre; line-height:130%">stack<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>int<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;s;</div><div style="padding:0 6px; white-space:pre; line-height:130%">int&nbsp;id,&nbsp;sccnum;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">void&nbsp;init()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;memset(chk,&nbsp;<span style="color:#FFCD22">0</span>,&nbsp;sizeof(chk));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;memset(degree,&nbsp;<span style="color:#FFCD22">0</span>,&nbsp;sizeof(degree));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;memset(fin,&nbsp;<span style="color:#FFCD22">false</span>,&nbsp;sizeof(degree));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;memset(uni,&nbsp;<span style="color:#FFCD22">0</span>,&nbsp;sizeof(uni));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;SCC.clear();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(<span style="color:#F1F2F3"></span><span style="color:#93C763">!</span>s.empty())&nbsp;s.pop();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">0</span>;&nbsp;sccnum&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">int&nbsp;dfs(int&nbsp;cur)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;chk[cur]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span><span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>id;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;s.push(cur);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;parent&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;chk[cur];</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(auto<span style="color:#F1F2F3"></span><span style="color:#93C763">&amp;</span>&nbsp;next&nbsp;:&nbsp;node[cur])&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(chk[next]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">0</span>)&nbsp;parent&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;min(parent,&nbsp;dfs(next));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;(<span style="color:#F1F2F3"></span><span style="color:#93C763">!</span>fin[next])&nbsp;parent&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;min(parent,&nbsp;chk[next]);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#919191">//부모일&nbsp;때&nbsp;하나의&nbsp;SCC&nbsp;생성</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(chk[cur]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;parent)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vector<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>int<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;subSCC;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sccnum<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span><span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(<span style="color:#FFCD22">1</span>)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;node&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;s.top();&nbsp;s.pop();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subSCC.push_back(node);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fin[node]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">true</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uni[node]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;sccnum;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(chk[node]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;parent)&nbsp;break;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SCC.push_back(subSCC);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;parent;</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">int&nbsp;main()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;cin.tie(nullptr);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;cout.tie(NULL);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;ios_base::sync_with_stdio(<span style="color:#FFCD22">false</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;t;&nbsp;cin&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;t;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(t<span style="color:#F1F2F3"></span><span style="color:#93C763">-</span><span style="color:#F1F2F3"></span><span style="color:#93C763">-</span>)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;V,&nbsp;E;&nbsp;cin&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;V&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;E;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(E<span style="color:#F1F2F3"></span><span style="color:#93C763">-</span><span style="color:#F1F2F3"></span><span style="color:#93C763">-</span>)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;a,&nbsp;b;&nbsp;cin&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;a&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&gt;</span>&nbsp;b;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node[a].push_back(b);&nbsp;<span style="color:#919191">//a-&gt;b</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">1</span>;&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;V;&nbsp;i<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span><span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(chk[i]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">0</span>)&nbsp;dfs(i);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#919191">//answer</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">1</span>;&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;V;&nbsp;i<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span><span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(auto<span style="color:#F1F2F3"></span><span style="color:#93C763">&amp;</span>&nbsp;next&nbsp;:&nbsp;node[i])&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#919191">//same&nbsp;union</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(uni[i]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;uni[next])&nbsp;continue;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;degree[uni[next]]<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span><span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;ans&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">1</span>;&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;sccnum;&nbsp;i<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span><span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(degree[i]&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">0</span>)&nbsp;ans<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span><span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>&nbsp;ans&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span>&nbsp;<span style="color:#EC7600">'\n'</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;<span style="color:#FFCD22">1</span>;&nbsp;i&nbsp;<span style="color:#F1F2F3"></span><span style="color:#93C763">&lt;</span><span style="color:#F1F2F3"></span><span style="color:#93C763">=</span>&nbsp;V;&nbsp;i<span style="color:#F1F2F3"></span><span style="color:#93C763">+</span><span style="color:#F1F2F3"></span><span style="color:#93C763">+</span>)&nbsp;node[i].clear();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;<span style="color:#FFCD22">0</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4ftext-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#4f4f4f;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>
<br/>

### review
SCC 응용 문제로 분류되고 있는 도미노 문제다. SCC 기본 문제랑 개념만 익히고 막 시작했을 땐 좀 당황스러웠다.<br>
TC에서는 1->2, 2->3 의 관계를 나타내고 있어서 사이클이 발생하지 않는다. 1을 톡 치면 모든게 우르르 무너져서 답은 1이다.<br>
좀 난감했던 부분은 '사이클'이 발생하지 않는데 왜 SCC 문제로 분류되는지였다. 하지만 전에 참고했던 글에서 이런 내용이 있었다.<br>
SCC 알고리즘은 그 자체로 의미가 있다기 보다는 <strong>위상 정렬과 같이 응용되는 경우가 많습니다.</strong><br>
<br>
위상 정렬은 노드들 간의 순서가 정해져 있을 때 이를 정해진 순서(규칙)대로 정렬하는걸 말한다. <strong>사이클이 발생하면 안된다.</strong><br>
사이클이 발생한다면 이를 한 집단으로 묶고 또 발생하면 묶어서(SCC) 위상 정렬을 수행하면 되겠다는 생각이 들었다.<br>
그리고 [BOJ 2150](https://yooniversal.github.io/blog/post65/)의 TC를 참고하면 알겠지만 노드 단 1개도 SCC가 될 수 있다.<br>
그럼 이 문제의 TC에서는 사이클이 발생하지 않으므로 1, 2, 3이 각각 SCC가 된다고 보면 되겠다. 그럼 위상 정렬을 적용할 수 있다.<br>
<br>
적용하기 전에 왜 적용하는지 이유를 잘 모른다면 충분히 생각해볼 필요가 있다. 왜 위상 정렬을 이용해야 할까?<br>
도미노는 시작 지점에서 톡 치면 연결된 도미노가 우르르 쓰러진다. 그리고 연결되지 않은 부분에서 멈추게 된다.<br>
여기서 연결되지 않은 부분을 또 다른 SCC라 착각하기 쉽다. 아래 예가 반례다.<br>
```
1 2
2 3
3 1
1 4

1, 2, 3은 사이클을 이룬다. 그럼 SCC는 [1, 2, 3], [4]가 된다.
근데 1을 톡 치면 2와 4가 같이 무너진다. SCC가 다르다고 독립됐다고 보면 안된다.
```
그럼 어떻게 접근해야 맞는걸까? SCC가 구분되는게 의미가 없어 보이겠지만 그렇지 않다. 잘 생각해보자.<br>
1을 치면 2는 물론이고 4도 무너지지만, 2와 3은 쳐도 4가 무너지지 않는다. <strong>1이 무너져야 한다.</strong><br>
그래서 나는 1처럼 다른 SCC와 연결 돼있는 녀석이 parent가 돼야 한다고 생각했다. 근데 이놈을 정하는 기준이 쉽지 않다.<br>
숫자가 제일 작은걸 하자니 노드의 번호가 다르면 그게 곧 반례가 된다.<br>
그렇다고 인풋을 뒤져서 많이 연결된걸 찾을 수도 없다. 당연히 시간 초과 당한다.<br>
<br>
union-find처럼 부모 스스로가 집합의 대표가 되는 것도 좋겠지만, 집합의 번호를 할당해주는 것도 방법이다.<br>
그래서 아래와 같이 sccnum으로 집합 번호를 지정해주고, 속한 노드들을 uni[]에 적어줬다.<br>
```
int dfs(int cur){
  ...
  //부모일 때 하나의 SCC 생성
   if (chk[cur] == parent) {
       vector<int> subSCC;
       sccnum++; //집합 번호는 1부터 시작
       while (1) {
           int node = s.top(); s.pop();
           subSCC.push_back(node);
           fin[node] = true;
           uni[node] = sccnum; //어디 집합에 속했는지
           if (chk[node] == parent) break;
       }
       SCC.push_back(subSCC);
   }

   return parent;
}
```
그럼 다시 돌아와서 TC를 생각해보자. SCC는 [1, 2, 3], [4]로 구분된다.<br>
간단하게 집합 번호로 구분하면 [1], [2]가 된다. SCC로 묶으니 훨씬 간단해졌다! 관계는 [1]->[2]이다.<br>
위상 정렬에서는 degree가 0이 될 때 큐에 넣어서 진행했다. 0이 되는 녀석이 없으면 사이클이 발생한다는 말이 된다.<br>
하지만 SCC로 묶어버렸으니 사이클은 존재하지 않고, 0이 되는 녀석이 반드시 존재한다!<br>
그럼 0이 되는 얘들이 스타트를 끊는다는 말인데 그 횟수만큼 도미노를 건드려야 된다는걸 알 수 있다.<br>
```
//answer
for (int i = 1; i <= V; i++) {
    for (auto& next : node[i]) {
        if (uni[i] == uni[next]) continue; //same union
        degree[uni[next]]++;
    }
}

int ans = 0;
for (int i = 1; i <= sccnum; i++)
    if (degree[i] == 0) ans++;

cout << ans << '\n';
```


<script src="https://utteranc.es/client.js"
        repo="yooniversal/blog-comments"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
